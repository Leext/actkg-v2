## API 1 : Entity Search 实体搜索

在知识图谱中按名称或编号搜索相应实体信息并返回相关结果

```
GET /api/graph/entity/
```

参数说明

|参数名|参数说明|是否必填|默认值|
|:----|:------|:-----|:----|
|name |要搜索的实体名，遇到同名实体默认返回所有同名实体搜索结果 | name 与 id 必填一项 | None|
|id   |要搜索的实体编号，即调用任意api时返回实体属性中的neoId字段 | name 与 id 必填一项 | None|
|autopick|是否开启同名实体自动选择，如果开启，则在遇到同名实体时，<br/>系统会选择知名度最高的实体返回，不会返回所有同名实体列表	|否|False|

请求示例1:

```
GET /api/graph/entity/?name=天安门
```

示例1结果:

```json
[{
    "设计者": "工部尚书蒯祥",
    "适宜游玩季节": "四季皆宜",
    "keyId": "2394",
    "description": "天安门：中华人民共和国的象征。坐落在中华人民共和国首都——北京市的中心、故宫的南端，与天安门广场隔长安街相望。是明清两代北京皇城的正门。设计者为明代御用建筑匠师蒯祥。 城台下有券门五阙，中间的券门最大，位于北京皇城中轴线上，过去只有皇帝才可以由此出入。正中门洞上方悬挂着巨大的毛泽东主席画像，两边分别是“中华人民共和国万岁”和“世界人民大团结万岁”的大幅标语。始建于明朝永乐十五年（公元1417年），最初名叫“承天门”，寓“承天启运、受命于天”之意，是紫禁城的正门。清朝顺治八年（公元1651年）更名为天安门。既包含了皇帝是替天行使权力、理应万世至尊的意旨；又寓有“外安内和、长治久安”的含义。 1925年10月10日，故宫博物院成立，天安门开始对民众开放。1949年10月1日，在这里举行了中华人民共和国开国大典，它由此被设计入国徽，并成为中华人民共和国的象征。天安门被中华人民共和国国务院公布为第一批全国重点文物保护单位之一。 它以其500多年厚重的历史内涵，高度浓缩了中华古代文明与现代文明，成为举世瞩目、令人神往的地方。 ",
    "竣工时间": "1420年（明永乐十八年）",
    "name": "天安门",
    "地点": "中国北京市东城区天安门广场北侧",
    "neoId": 7827194,
    "门票价格": "免费,登天安门城楼：15.00元",
    "label": "景点",
    "登录": "1961年",
    "外文名称": "Tian’an men(the Gate of Heavenly Peace)",
    "中文名称": "天安门",
    "subname": "（北京故宫城门、中国国家象征）",
    "建议游玩时长": "1-2小时",
    "类别": "革命遗址及革命纪念建筑物",
    "开放时间": "4：30——17：00",
    "taglist": "景点,建筑,北京",
    "级别": "全国重点文物保护单位",
    "年代": "明清",
    "始建时间": "1417年(明永乐十五年)"
}, {
    "设计者": "工部尚书蒯祥",
    "适宜游玩季节": "四季皆宜",
    "keyId": "2394/9612438",
    "description": "天安门：中华人民共和国的象征。坐落在中华人民共和国首都——北京市的中心、故宫的南端，与天安门广场隔长安街相望。是明清两代北京皇城的正门。设计者为明代御用建筑匠师蒯祥。 城台下有券门五阙，中间的券门最大，位于北京皇城中轴线上，过去只有皇帝才可以由此出入。正中门洞上方悬挂着巨大的毛泽东主席画像，两边分别是“中华人民共和国万岁”和“世界人民大团结万岁”的大幅标语。始建于明朝永乐十五年（公元1417年），最初名叫“承天门”，寓“承天启运、受命于天”之意，是紫禁城的正门。清朝顺治八年（公元1651年）更名为天安门。既包含了皇帝是替天行使权力、理应万世至尊的意旨；又寓有“外安内和、长治久安”的含义。 1925年10月10日，故宫博物院成立，天安门开始对民众开放。1949年10月1日，在这里举行了中华人民共和国开国大典，它由此被设计入国徽，并成为中华人民共和国的象征。天安门被中华人民共和国国务院公布为第一批全国重点文物保护单位之一。 它以其500多年厚重的历史内涵，高度浓缩了中华古代文明与现代文明，成为举世瞩目、令人神往的地方。 ",
    "竣工时间": "1420年（明永乐十八年）",
    "name": "天安门",
    "地点": "中国北京市东城区天安门广场北侧",
    "neoId": 8628061,
    "门票价格": "免费,登天安门城楼：15.00元",
    "label": "景点",
    "登录": "1961年",
    "外文名称": "Tian’an men(the Gate of Heavenly Peace)",
    "中文名称": " 天安门",
    "subname": "（北京故宫城门、中国国家象征）",
    "建议游玩时长": "1小时",
    "类别": "革命遗址及革命纪念建筑物",
    "开放时间": "4：30——17：00",
    "taglist": "景点,建筑,北京",
    "级别": "全国重点文物保护单位",
    "年代": "明清",
    "始建时间": "1417年(明永乐十五年)"
}, {
    "出品时间": "2009年",
    "keyId": "2394/9612439",
    "对白语言": "大陆国语",
    "上映时间": "2009-09-02",
    "编剧": "叶大鹰,王兵",
    "neoId": 8628074,
    "label": "影视",
    "分级": "普通级",
    "类型": "历史",
    "色彩": "彩色",
    "票房记录": "300万 ",
    "taglist": "剧情电影,电影作品,电影,影视作品,娱乐作品",
    "description": "《天安门》是中国电影集团公司出品的历史题材电影，由叶大鹰执导，潘粤明、郭柯宇等领衔主演。影片讲述了1949年为迎接开国大典，华北军区抗敌剧社舞美队紧急受命，对天安门进行全面翻新整修的故事。 影片于2009年9月2日在中国大陆上映。",
    "中文名": "天安门",
    "发行公司": "中国电影集团公司",
    "出品公司": "中国电影集团公司,电影频道节目制作中心 ",
    "导演": "叶大鹰",
    "制片地区": "中国大陆",
    "name": "天安门",
    "主演": "潘粤明,郭柯宇,徐啸力,信鹏,白琳,大冢匡将",
    "片长": "104分钟",
    "subname": "NO_SUBNAME",
    "拍摄地点": "横店"
}, {
    "keyId": "9946687",
    "name": "普5 天安门图案普通邮票（第五版）",
    "neoId": 3583613,
    "志编号": "普5",
    "中文名": "普5,天安门图案普通邮票（第五版）",
    "label": "NONE",
    "简称": "天安门",
    "subname": "NO_SUBNAME",
    "设计者": "孙传哲",
    "taglist": "非生活,生活",
    "description": "名称：天安门图案普通邮票（第五版）类别：普通邮票题材：邮政全套枚数：6整版枚数：200(20×10)发行机构：邮电部邮电管理总局发行日期：1951-04-18背胶：无背胶印刷机构：北京中国人民印刷厂齿孔度数：P14市场参考价：55000。00版别：胶雕套印 有无齿印样。 详细介绍1951年4月18日，邮电部发行了第五版天安门图普通邮票。"
}]
```

请求示例2：

```
GET /api/graph/entity/?id=7827194
```

示例2结果：

```json
{
    "设计者": "工部尚书蒯祥",
    "适宜游玩季节": "四季皆宜",
    "keyId": "2394",
    "description": "天安门：中华人民共和国的象征。坐落在中华人民共和国首都——北京市的中心、故宫的南端，与天安门广场隔长安街相望。是明清两代北京皇城的正门。设计者为明代御用建筑匠师蒯祥。 城台下有券门五阙，中间的券门最大，位于北京皇城中轴线上，过去只有皇帝才可以由此出入。正中门洞上方悬挂着巨大的毛泽东主席画像，两边分别是“中华人民共和国万岁”和“世界人民大团结万岁”的大幅标语。始建于明朝永乐十五年（公元1417年），最初名叫“承天门”，寓“承天启运、受命于天”之意，是紫禁城的正门。清朝顺治八年（公元1651年）更名为天安门。既包含了皇帝是替天行使权力、理应万世至尊的意旨；又寓有“外安内和、长治久安”的含义。 1925年10月10日，故宫博物院成立，天安门开始对民众开放。1949年10月1日，在这里举行了中华人民共和国开国大典，它由此被设计入国徽，并成为中华人民共和国的象征。天安门被中华人民共和国国务院公布为第一批全国重点文物保护单位之一。 它以其500多年厚重的历史内涵，高度浓缩了中华古代文明与现代文明，成为举世瞩目、令人神往的地方。 ",
    "竣工时间": "1420年（明永乐十八年）",
    "name": "天安门",
    "地点": "中国北京市东城区天安门广场北侧",
    "门票价格": "免费,登天安门城楼：15.00元",
    "label": "景点",
    "登录": "1961年",
    "外文名称": "Tian’an men(the Gate of Heavenly Peace)",
    "中文名称": "天安门",
    "subname": "（北京故宫城门、中国国家象征）",
    "建议游玩时长": "1-2小时",
    "类别": "革命遗址及革命纪念建筑物",
    "开放时间": "4：30——17：00",
    "taglist": "景点,建筑,北京",
    "级别": "全国重点文物保护单位",
    "年代": "明清",
    "始建时间": "1417年(明永乐十五年)"
}
```

## API 2 : Question Answering 中文问答

基于知识图谱中的数据对用户的知识性提问进行检索与回答

```
GET /api/graph/qa/
```

参数说明:

|参数名 | 参数说明 | 是否必填 | 默认值 |
|:-----|:--------|:-------|:------|
|q | 问题内容，如果无法回答则返回 “No Answer”	| 是 | None|

示例 1

```
GET /api/graph/qa/?q=北航的现任校长是哪个学校毕业的
```

示例1结果


"北京航空航天大学的现任校长是徐惠彬，徐惠彬的毕业院校是德国柏林工业大学"


示例 2

```
GET /api/graph/qa/?q=北航的占地面积是多少
```

示例2结果:

```
"截止2015年，学校设有学院路、沙河两个校区，占地3000亩，总建筑面积150余万平方米"
```

## API 3 : NLP 自然语言处理（分词/词性标注/实体识别/链接）

将用户发来的文本中提到的实体进行分词/词性标注/实体识别/实体链接四层次的自然语言处理工作，其中实体链接结果为数据库中的实体标号

```
GET /api/nlp/parse/
```

参数说明

|参数名 | 参数说明 | 是否必填 | 默认值 |
|:-----|:--------|:-------|:-------|
|content | 待标注的文档内容 | 是 | None |
|level | 所需最深处理层次| 否 | 2 |

关于 level 的取值：

- 1 —— 只返回分词结果
- 2 —— 返回以上所有结果及词性标注结果
- 3 —— 返回以上所有结果及实体识别结果
- 4 —— 返回以上所有结果及实体链接结果	

请求示例

```
GET /api/nlp/parse/?content=雷军喊话，小米在未来两年半时间内超越华为，重夺国内市场第一&level=4
```

结果：

```json
{
    "seg": ["雷军", "喊话", "，", "小米", "在", "未来", "两年", "半", "时间", "内", "超越", "华为", "，", "重夺", "国内", "市场", "第一"],
    "pos": ["nr", "v", "x", "n", "p", "t", "m", "m", "n", "n", "v", "nr", "x", "v", "s", "n", "m"],
    "ner": ["B", "O", "O", "B", "O", "O", "O", "O", "O", "O", "O", "B", "O", "O", "O", "O", "O"],
    "nel": ["3922934", "", "", "2526492", "", "", "", "", "", "", "", "6329551", "", "", "", "", ""]
}
```


> 说明：
>
> 1. 分词结果为一个长度为 L 的列表，L 为词语个数，列表元素为分割之后的词语
> 2. 词性标注结果采用与 ICTCLAS 兼容的词性标记法
> 3. 实体识别结果采用通用的 BIO 标记法
> 4. 实体链接结果为链接到的实体在数据库中的编号，标记在实体名的第一个词语下，链接不到的词语用空串标记

## API 4 : Information Extraction 信息抽取

将用户发来的文本中涉及到的结构化信息进行抽取，并以 [主，谓，宾] 三元组列表的形式返回抽取结果

```
GET /api/nlp/extraction/
```

参数说明:

|参数名|参数说明|是否必填|默认值|
|:----|:------|:-----|:-----|
|content|待抽取的文档内容|是|None|

请求示例:

```
GET /api/nlp/extraction/?content=柏林是德国首都，也是德国最大的城市，现有居民约340万人。柏林位于德国东北部，四面被勃兰登堡州环绕，施普雷河流经该市。
```
结果:

```json
{
    "results": [{
        "triples": [
            ["柏林", "是", "德国首都"]
        ],
        "sentence": "柏林是德国首都，也是德国最大的城市，现有居民约340万人。"
    }, {
        "triples": [
            ["柏林", "位于", "德国东北部"],
            ["勃兰登堡州", "环绕", "柏林"],
            ["施普雷河", "流经", "柏林"]
        ],
        "sentence": "柏林位于德国东北部，四面被勃兰登堡州环绕，施普雷河流经该市。"
    }]
}
```

> 说明：文本将被分句处理并以列表结构返回，列表内的每个元素为分句后分别的分析结果，sentence的值句子文本，triples的值为句子中提取到的三元组

## API 5 : KG Construction 知识图谱构建（待开发）

通过用户提供的 infobox 半结构化信息为用户构建小型知识图谱，并以数据库文件的形式返回

```
GET /api/graph/construction/
```

请求方式说明:

用户上传包含 infobox 信息单个文档或多个文档

返回结果说明:

为用户构建小型知识图谱，将构建结果以数据库文件的形式公布供用户下载